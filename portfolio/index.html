<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* .notification {
            font-size: 0.9rem;
            font-family: termina, sans-serif;
            position: absolute;
            left: 10%;
            top: 10%;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: #b6916d;
            color: #3c564f;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9;
            font-weight: 700;
            text-align: center;
            padding: 20px;
        } */
        .notification:hover {
                background: #bcb8ad;
            }

        .effect {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            position: relative;
        }

        .container:nth-child(1) {
            background: #3c564f;
        }

        .container:nth-child(2) {
            background: #b69187;
        }

        .container:nth-child(3) {
            background: #bcb8ad;
        }

        .container:nth-child(4) {
            background: #b6916d;
        }

        img {
            height: 150%;
            width: 100%;
            object-fit: cover;
        }

        .reveal {
            visibility: hidden;
            position: relative;
            width: 60%;
            height: 60%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
</head>

<body>
    <div class='effect'>
        <a href="https://codepen.io/cameronknight/full/pogQKwR" target="_blank">
            <div class='notification'>Try this new version for better performance</div>
        </a>
        <div class='reveal' class='effect'>
            <img
                src='https://images.unsplash.com/photo-1580215935060-a5adc57c5157?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=634&amp;q=80'>
        </div>
    </div>
    <div class='effect'>
        <div class='reveal'class='effect'>
            <img
                src='https://images.unsplash.com/photo-1580215935060-a5adc57c5157?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=634&amp;q=80'>
        </div>
    </div>
    <div class='effect'>
        <div class='reveal'>
            <img
                src='https://images.unsplash.com/photo-1580215935060-a5adc57c5157?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=634&amp;q=80'>
        </div>
    </div>
    <div class='effect'>
        <div class='reveal'>
            <img
                src='https://images.unsplash.com/photo-1580215935060-a5adc57c5157?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=634&amp;q=80'>
        </div>
    </div>
</body>
<script src="./assets/js/gsap.min.js"></script>
<script>
    const options = {
        root: null,
        rootMargin: "0px",
        threshold: 0.9
    };

    let revealCallback = (entries, self) => {
        entries.forEach((entry) => {
            let container = entry.target;
            let img = entry.target.querySelector(".reveal");
            const easeInOut = "power3.out";
            const revealAnim = gsap.timeline({
                ease: easeInOut
            });

            if (entry.isIntersecting) {
                revealAnim.set(container, {
                    visibility: "visible"
                });
                revealAnim.fromTo(
                    container, {
                        clipPath: "polygon(0 0, 0 0, 0 100%, 0% 100%)",
                        webkitClipPath: "polygon(0 0, 0 0, 0 100%, 0% 100%)"
                    }, {
                        clipPath: "polygon(0 0, 100% 0, 100% 100%, 0 100%)",
                        webkitClipPath: "polygon(0 0, 100% 0, 100% 100%, 0 100%)",
                        duration: 1,
                        ease: easeInOut
                    }
                );
                revealAnim.from(img, 4, {
                    scale: 1.4,
                    ease: easeInOut,
                    delay: -1
                });
                self.unobserve(entry.target);
            }
        });
    };

    let revealObserver = new IntersectionObserver(revealCallback, options);

    document.querySelectorAll(".reveal").forEach((reveal) => {
        revealObserver.observe(reveal);
    });
</script>

</html>